# ============================================
# ILA (Intelligent Learning Assistant) - Environment Variables
# ============================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to version control!

# ============================================
# SERVER CONFIGURATION
# ============================================
PORT=4001
NODE_ENV=development
CLIENT_URL=http://localhost:5173

# ============================================
# DATABASE CONFIGURATION
# ============================================
# MongoDB Connection String
# Format: mongodb+srv://username:password@cluster.mongodb.net/database-name
# Or for local: mongodb://localhost:27017/ila-db
MONGO_URI=mongodb+srv://username:password@cluster.mongodb.net/ila-db

# Redis Connection (for BullMQ job queue)
# Format: redis://localhost:6379
# Or for Redis Cloud: redis://username:password@host:port
REDIS_URL=redis://localhost:6379

# ============================================
# AUTHENTICATION
# ============================================
# JWT Secret Key - Generate a strong random string
# You can generate one with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# ============================================
# AI SERVICES
# ============================================
# Google Gemini API Key
# Required for: AI notes generation, assessment questions, feedback, and context-aware chatbot
# Get from: https://makersuite.google.com/app/apikey
# Note: Chatbot uses Gemini 1.5 Flash model (free tier friendly)
GEMINI_API_KEY=your_gemini_api_key_here

# AssemblyAI API Key
# Get from: https://www.assemblyai.com/app/account
ASSEMBLYAI_API_KEY=your_assemblyai_api_key_here

# YouTube Data API Key
# Get from: https://console.cloud.google.com/apis/credentials
YOUTUBE_DATA_API_KEY=your-youtube-data-api-key-here

# ============================================
# FEATURE 1: INTEGRATIONS
# ============================================

# --- Notion Integration ---
# Notion uses internal integrations with API keys (NOT OAuth)
# No environment variables needed here - users configure API key in the app
# Users will enter their API key and Database ID in Settings → Integrations

# --- Google Docs Integration ---
# OAuth 2.0 credentials from Google Cloud Console
# Get from: https://console.cloud.google.com/apis/credentials
# 1. Create OAuth 2.0 Client ID
# 2. Add authorized redirect URI: http://localhost:5173/integrations/googledocs/callback
# 3. Enable Google Docs API and Google Drive API
GOOGLE_CLIENT_ID=your_google_client_id_here.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your_google_client_secret_here
GOOGLE_REDIRECT_URI=http://localhost:5173/integrations/googledocs/callback

# --- Moodle Integration ---
# Moodle doesn't require OAuth - users configure manually in the app
# No environment variables needed

# ============================================
# FEATURE 2: AI PROCTORING
# ============================================
# No additional environment variables required
# Proctoring uses existing infrastructure (MediaPipe, keyboard tracking)

# ============================================
# FEATURE 3: CROSS-DEVICE SYNC (Optional)
# ============================================
# Choose ONE of the following options for real-time sync:

# --- Option 1: Firebase Realtime Database (Recommended) ---
# Get from: https://console.firebase.google.com/
# 1. Create a new project
# 2. Enable Realtime Database
# 3. Copy configuration from Project Settings → General → Your apps
FIREBASE_API_KEY=your_firebase_api_key
FIREBASE_AUTH_DOMAIN=your-project.firebaseapp.com
FIREBASE_DATABASE_URL=https://your-project-default-rtdb.firebaseio.com
FIREBASE_PROJECT_ID=your-project-id
FIREBASE_STORAGE_BUCKET=your-project.appspot.com
FIREBASE_MESSAGING_SENDER_ID=123456789012
FIREBASE_APP_ID=1:123456789012:web:abcdef123456

# --- Option 2: Supabase Realtime (Alternative) ---
# Get from: https://supabase.com/
# 1. Create a new project
# 2. Copy API keys from Project Settings → API
# SUPABASE_URL=https://your-project.supabase.co
# SUPABASE_ANON_KEY=your_supabase_anon_key_here
# SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here

# Note: If neither Firebase nor Supabase is configured, 
# the system will use MongoDB-only sync (works but not real-time)

# ============================================
# FEATURE 4: CONTEXT-AWARE CHATBOT (NEW!)
# ============================================
# The chatbot uses the same GEMINI_API_KEY as other AI features
# No additional environment variables needed
# The chatbot automatically uses video transcripts, descriptions, and topics as context
# Endpoint: POST /api/chat

# ============================================
# NOTES
# ============================================
# 1. Required variables: MONGO_URI, JWT_SECRET
# 2. Optional but recommended: GEMINI_API_KEY, ASSEMBLYAI_API_KEY, YOUTUBE_DATA_API_KEY
# 3. Integrations (Notion, Google Docs) are optional - app works without them
# 4. Firebase/Supabase is optional - sync works via MongoDB if not configured
# 5. Context-aware chatbot uses GEMINI_API_KEY - works with free tier
# 6. All features are backward compatible - existing functionality works even if new vars are not set

